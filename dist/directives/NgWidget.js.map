{"version":3,"sources":["../../src/directives/NgWidget.ts"],"names":[],"mappings":"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","file":"NgWidget.js","sourceRoot":"","sourcesContent":["import { NgWidgetContainer } from \"./NgWidgetContainer\";\r\nimport { INgWidgetConfig, INgWidgetEvent, INgWidgetPosition, INgWidgetSize, INgWidgetContainerRawPosition, INgWidgetDimensions } from \"../interfaces/INgDraggableWidgetConfig\";\r\nimport { Component, Directive, ElementRef, Renderer, EventEmitter, Host, ViewEncapsulation, Type, ComponentRef, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, DoCheck, ViewContainerRef, Output } from '@angular/core';\r\n\r\n/**\r\n *\tinputs array instead of @input decorator for ionic compatibility\r\n */\r\n\r\nexport class NgWidget implements OnInit, OnDestroy, DoCheck {\r\n\t\tprivate static CONST_DEFAULT_CONFIG: INgWidgetConfig = {\r\n\t\tcol: 1,\r\n\t\trow: 1,\r\n\t\tsizex: 1,\r\n\t\tsizey: 1,\r\n\t\tdragHandle: null,\r\n\t\tresizeHandle: null,\r\n\t\tfixed: false,\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tborderSize: 25,\r\n\t\tunitx: 0,\r\n\t\tunity: 0\r\n\t};\r\n\t// \tevent Emitters\r\n\t public onItemChange: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>(false);\r\n\t public onDragStart: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onDrag: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onDragStop: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onDragAny: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onResizeStart: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onResize: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onResizeStop: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onResizeAny: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onChangeStart: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onChange: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onChangeStop: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public onChangeAny: EventEmitter<INgWidgetEvent> = new EventEmitter<INgWidgetEvent>();\r\n\t public ngWidgetChange: EventEmitter<INgWidgetConfig> = new EventEmitter<INgWidgetConfig>();\r\n\r\n\t// \tdefault config\r\n\r\n\r\n\tpublic isFixed = false;\r\n\tpublic isDraggable = true;\r\n\tpublic isResizable = true;\r\n\tpublic minWidth = 0;\r\n\tpublic minHeight = 0;\r\n\r\n\t// \tprivate variables\r\n\tprivate _payload: any;\r\n\tprivate _currentPosition: INgWidgetPosition = { col: 1, row: 1 };\r\n\tprivate _size: INgWidgetSize = { x: 1, y: 1 };\r\n\tprivate _config = NgWidget.CONST_DEFAULT_CONFIG;\r\n\tprivate _dragHandle: string;\r\n\tprivate _resizeHandle: string;\r\n\tprivate _borderSize: number;\r\n\tprivate _elemWidth: number;\r\n\tprivate _elemHeight: number;\r\n\tprivate _elemLeft: number;\r\n\tprivate _elemTop: number;\r\n\tprivate _added = false;\r\n\tprivate _differ: KeyValueDiffer<String, any>;\r\n\tprivate _cascadeMode: string;\r\n\tprivate _maxCols = 0;\r\n\tprivate _minCols = 0;\r\n\tprivate _maxRows = 0;\r\n\tprivate _minRows = 0;\r\n\tprivate _dragStartPosition: INgWidgetPosition = { col: 1, row: 1};\r\n\r\n\t// \t[ng-widget] handler\r\n\tset config(v: INgWidgetConfig) {\r\n\t\tconst defaults = NgWidget.CONST_DEFAULT_CONFIG;\r\n\r\n\t\tfor (const x in defaults) {\r\n\t\t\tif (!v[x]) {\r\n\t\t\t\tv[x] = defaults[x];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setConfig(v);\r\n\r\n\t\tif (this._differ == null && v != null) {\r\n\t\t\tthis._differ = this._differs.find(this._config).create(null);\r\n\t\t}\r\n\r\n\t\tif (!this._added) {\r\n\t\t\tthis._added = true;\r\n\t\t\tthis._ngWidgetContainer.addItem(this);\r\n\t\t}\r\n\r\n\t\tthis._recalculateDimensions();\r\n\t\tthis._recalculatePosition();\r\n\t}\r\n\r\n\tget sizex(): number {\r\n\t\treturn this._size.x;\r\n\t}\r\n\r\n\tget sizey(): number {\r\n\t\treturn this._size.y;\r\n\t}\r\n\r\n\tget col(): number {\r\n\t\treturn this._currentPosition.col;\r\n\t}\r\n\r\n\tget row(): number {\r\n\t\treturn this._currentPosition.row;\r\n\t}\r\n\r\n\tget currentCol(): number {\r\n\t\treturn this._currentPosition.col;\r\n\t}\r\n\r\n\tget currentRow(): number {\r\n\t\treturn this._currentPosition.row;\r\n\t}\r\n\r\n\t// \tconstructor\r\n\tconstructor(private _differs: KeyValueDiffers, private _ngEl: ElementRef, private _renderer: Renderer,\r\n\t\tprivate _ngWidgetContainer: NgWidgetContainer, public containerRef: ViewContainerRef) { }\r\n\r\n\tpublic onResizeStartEvent(): void {\r\n\t\tconst event: INgWidgetEvent = this.getEventOutput();\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'z-index', String(++this._ngWidgetContainer.zIndex));\r\n\t\tthis.onResizeStart.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChangeStart.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onResizeEvent(): void {\r\n\t\tconst event: INgWidgetEvent = this.getEventOutput();\r\n\t\tthis.onResize.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChange.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onResizeStopEvent(): void {\r\n\t\tconst event: INgWidgetEvent = this.getEventOutput();\r\n\t\tthis.onResizeStop.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChangeStop.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\r\n\t\tthis._config.sizex = this._size.x;\r\n\t\tthis._config.sizey = this._size.y;\r\n\t\tthis.ngWidgetChange.emit(this._config);\r\n\t}\r\n\tpublic onDragStartEvent(): void {\r\n\t\tconst event: INgWidgetEvent = this.getEventOutput();\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"z-index\", String(++this._ngWidgetContainer.zIndex));\r\n\t\tthis.onDragStart.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChangeStart.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onDragEvent(): void {\r\n\t\tconst event: INgWidgetEvent = this.getEventOutput();\r\n\t\tthis.onDrag.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChange.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onDragStopEvent(): void {\r\n\t\tconst event: INgWidgetEvent = this.getEventOutput();\r\n\t\tthis.onDragStop.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChangeStop.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\r\n\t\tthis._config.col = this._currentPosition.col;\r\n\t\tthis._config.row = this._currentPosition.row;\r\n\t\tthis.ngWidgetChange.emit(this._config);\r\n\t}\r\n\tpublic onCascadeEvent(): void {\r\n\t\tthis._config.sizex = this._size.x;\r\n\t\tthis._config.sizey = this._size.y;\r\n\t\tthis._config.col = this._currentPosition.col;\r\n\t\tthis._config.row = this._currentPosition.row;\r\n\t\tthis.ngWidgetChange.emit(this._config);\r\n\t}\r\n\r\n\tpublic ngOnInit(): void {\r\n\t\tconsole.log(\"ngOnInit\");\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, \"widget\", true);\r\n\t\tif (this._ngWidgetContainer.autoStyle) {this._renderer.setElementStyle(this._ngEl.nativeElement, \"position\", \"absolute\"); }\r\n\t\tthis._recalculateDimensions();\r\n\t\tthis._recalculatePosition();\r\n\r\n\t\tif (!this._added) {\r\n\t\t\tthis._added = true;\r\n\t\t\tthis._ngWidgetContainer.addItem(this);\r\n\t\t}\r\n\t}\r\n\r\n\t// \tpublic methods\r\n\tpublic canDrag(e: any): boolean {\r\n\t\tif (!this.isDraggable) return false;\r\n\r\n\t\tif (this._dragHandle) {\r\n\t\t\treturn this.findHandle(this._dragHandle, e.target);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// tslint:disable:curly\r\n\tpublic findHandle(handleSelector: string, startElement: HTMLElement): boolean {\r\n\t\ttry {\r\n\t\t\tlet targetElem: any = startElement;\r\n\r\n\t\t\twhile (targetElem && targetElem !== this._ngEl.nativeElement) {\r\n\t\t\t\tif (this.elementMatches(targetElem, handleSelector)) return true;\r\n\r\n\t\t\t\ttargetElem = targetElem.parentElement;\r\n\t\t\t}\r\n\t\t// tslint:disable-next-line:no-empty\r\n\t\t} catch (err) {}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic canResize(e: any): string {\r\n\t\tconsole.log(\"isResizable,_resizeHandle,_borderSize\", this.isResizable, this._resizeHandle, this._borderSize);\r\n\t\tif (!this.isResizable) return null;\r\n\r\n\t\tif (this._resizeHandle) {\r\n\t\t\treturn this.findHandle(this._resizeHandle, e.target) ? \"both\" : null;\r\n\t\t}\r\n\r\n\t\tif (this._borderSize <= 0) return null;\r\n\r\n\t\t// const mousePos: INgWidgetContainerRawPosition = this._getMousePosition(e);\r\n\r\n\t\t// if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t// \t&& mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t// \treturn 'both';\r\n\t\t// } else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize) {\r\n\t\t// \treturn 'width';\r\n\t\t// } else if (mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t// \treturn 'height';\r\n\t\t// }\r\n\t\treturn this.getResizeDirection(e);\r\n\r\n\t\t// return null;\r\n\t}\r\n\r\n\tpublic getResizeDirection(e: MouseEvent): string {\r\n\t\tconst mousePos: INgWidgetContainerRawPosition = this._getMousePosition(e);\r\n\r\n\t\tif (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t\t&& mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn \"both\";\r\n\t\t} else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize) {\r\n\t\t\treturn \"width\";\r\n\t\t} else if (mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn \"height\";\r\n\t\t} else\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\tpublic onMouseMove(e: any): void {\r\n\t\tif (this._ngWidgetContainer.autoStyle) {\r\n\t\t\tif (this._ngWidgetContainer.resizeEnable && !this._resizeHandle && this.isResizable) {\r\n\t\t\t\tconst mousePos: INgWidgetContainerRawPosition = this._getMousePosition(e);\r\n\t\t\t\tif (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t\t\t\t&& mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"nwse-resize\");\r\n\t\t\t\t} else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize) {\r\n\t\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"ew-resize\");\r\n\t\t\t\t} else if (mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"ns-resize\");\r\n\t\t\t\t} else if (this._ngWidgetContainer.dragEnable && this.canDrag(e)) {\r\n\t\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"move\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"default\");\r\n\t\t\t\t}\r\n\t\t\t} else if (this._ngWidgetContainer.resizeEnable && this.canResize(e)) {\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"nwse-resize\");\r\n\t\t\t} else if (this._ngWidgetContainer.dragEnable && this.canDrag(e)) {\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"move\");\r\n\t\t\t} else {\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"cursor\", \"default\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tif (this._added) {this._ngWidgetContainer.removeItem(this);}\r\n\t}\r\n\r\n\t// \tgetters\r\n\tpublic getElement(): ElementRef {\r\n\t\treturn this._ngEl;\r\n\t}\r\n\r\n\tpublic getDragHandle(): string {\r\n\t\treturn this._dragHandle;\r\n\t}\r\n\r\n\tpublic getResizeHandle(): string {\r\n\t\treturn this._resizeHandle;\r\n\t}\r\n\r\n\tpublic getDimensions(): INgWidgetDimensions {\r\n\t\treturn { \"width\": this._elemWidth, \"height\": this._elemHeight };\r\n\t}\r\n\r\n\tpublic getSize(): INgWidgetSize {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic getPosition(): INgWidgetContainerRawPosition {\r\n\t\treturn { \"left\": this._elemLeft, \"top\": this._elemTop };\r\n\t}\r\n\r\n\tpublic getWidgetPosition(): INgWidgetPosition {\r\n\t\treturn this._currentPosition;\r\n\t}\r\n\r\n\tpublic getWidgetDragStartPosition(): INgWidgetPosition {\r\n\t\treturn this._dragStartPosition;\r\n\t}\r\n\t// \tsetters\r\n\tpublic setWidgetDragStartPosition(position: INgWidgetPosition) {\r\n\t\tthis._dragStartPosition = position;\r\n\t}\r\n\r\n\tpublic setConfig(config: INgWidgetConfig): void {\r\n\t\tconsole.log(config);\r\n\t\tthis._config = config;\r\n\r\n\t\tthis._payload = config.payload;\r\n\t\tthis._currentPosition.col = config.col ? config.col : NgWidget.CONST_DEFAULT_CONFIG.col;\r\n\t\tthis._currentPosition.row = config.row ? config.row : NgWidget.CONST_DEFAULT_CONFIG.row;\r\n\t\tif (!this._added && ((this._ngWidgetContainer.getConfig().widget_width_factor && config.unitx) != null ) ) {\r\n\t\t\tthis._size.x = this._ngWidgetContainer.widget_width_factor * config.unitx;\r\n\t\t\tconsole.log(this._size.x, this._ngWidgetContainer.widget_width_factor * config.unitx);\r\n\t\t} else {\r\n\t\t\tthis._size.x = config.sizex ? config.sizex : NgWidget.CONST_DEFAULT_CONFIG.sizex;\r\n\t\t}\r\n\r\n\t\tif (!this._added && ((this._ngWidgetContainer.getConfig().widget_height_factor && config.unity) != null)) {\r\n\t\t\tthis._size.y = this._ngWidgetContainer.widget_height_factor * config.unity;\r\n\t\t} else {\r\n\t\t\tthis._size.y = config.sizey ? config.sizey : NgWidget.CONST_DEFAULT_CONFIG.sizey;\r\n\t\t}\r\n\r\n\t\tthis._dragHandle = config.dragHandle;\r\n\t\tthis._resizeHandle = config.resizeHandle;\r\n\t\tthis._borderSize = config.borderSize;\r\n\t\tthis.isDraggable = config.draggable ? true : false;\r\n\t\tthis.isResizable = config.resizable ? true : false;\r\n\t\tthis.isFixed = config.fixed ? true : false;\r\n\r\n\t\tthis._maxCols = !isNaN(config.maxCols) && isFinite(config.maxCols) ? config.maxCols : 0;\r\n\t\tthis._minCols = !isNaN(config.minCols) && isFinite(config.minCols) ? config.minCols : 0;\r\n\t\tthis._maxRows = !isNaN(config.maxRows) && isFinite(config.maxRows) ? config.maxRows : 0;\r\n\t\tthis._minRows = !isNaN(config.minRows) && isFinite(config.minRows) ? config.minRows : 0;\r\n\r\n\t\tthis.minWidth = !isNaN(config.minWidth) && isFinite(config.minWidth) ? config.minWidth : 0;\r\n\t\tthis.minHeight = !isNaN(config.minHeight) && isFinite(config.minHeight) ? config.minHeight : 0;\r\n\r\n\t\tif (this._minCols > 0 && this._maxCols > 0 && this._minCols > this._maxCols) { this._minCols = 0;}\r\n\t\tif (this._minRows > 0 && this._maxRows > 0 && this._minRows > this._maxRows) { this._minRows = 0;}\r\n\r\n\t\tif (this._added) {\r\n\t\t\tthis._ngWidgetContainer.updateItem(this);\r\n\t\t}\r\n\r\n\t\tthis._size = this.fixResize(this._size);\r\n\r\n\t\tthis._recalculatePosition();\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic ngDoCheck(): boolean {\r\n\t\tif (this._differ != null) {\r\n\t\t\tconst changes: any = this._differ.diff(this._config);\r\n\r\n\t\t\tif (changes != null ) {\r\n\t\t\t\tconsole.log(\"ngDoCheck -> NgWidget\");\r\n\t\t\t\tthis._applyChanges(changes);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic setSize(newSize: INgWidgetSize, update: boolean = true): void {\r\n\t\tnewSize = this.fixResize(newSize);\r\n\t\tthis._size = newSize;\r\n\t\tif (update) { this._recalculateDimensions(); }\r\n\r\n\t\tthis.onItemChange.emit(this.getEventOutput());\r\n\t}\r\n\r\n\tpublic setGridPosition(widgetPosition: INgWidgetPosition, update: boolean = true): void {\r\n\t\tconsole.log(\"widget -> setGridPosition\", widgetPosition);\r\n\t\tthis._currentPosition = widgetPosition;\r\n\t\tif (update) { this._recalculatePosition(); }\r\n\r\n\t\tthis.onItemChange.emit(this.getEventOutput());\r\n\t}\r\n\r\n\tpublic getEventOutput(): INgWidgetEvent {\r\n\t\treturn <INgWidgetEvent>{\r\n\t\t\tpayload: this._payload,\r\n\t\t\tcol: this._currentPosition.col,\r\n\t\t\trow: this._currentPosition.row,\r\n\t\t\tsizex: this._size.x,\r\n\t\t\tsizey: this._size.y,\r\n\t\t\twidth: this._elemWidth,\r\n\t\t\theight: this._elemHeight,\r\n\t\t\tleft: this._elemLeft,\r\n\t\t\ttop: this._elemTop\r\n\t\t};\r\n\t}\r\n\r\n\tpublic setPosition(x: number, y: number): void {\r\n\t\tswitch (this._cascadeMode) {\r\n\t\t\tcase \"up\":\r\n\t\t\tcase \"left\":\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"left\", x + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"top\", y + \"px\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"right\":\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"right\", x + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"top\", y + \"px\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"down\":\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"left\", x + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"bottom\", y + \"px\");\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._elemLeft = x;\r\n\t\tthis._elemTop = y;\r\n\t}\r\n\r\n\tpublic setCascadeMode(cascade: string): void {\r\n\t\tthis._cascadeMode = cascade;\r\n\t\tswitch (cascade) {\r\n\t\t\tcase \"up\":\r\n\t\t\tcase \"left\":\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"left\", this._elemLeft + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"top\", this._elemTop + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"right\", null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"bottom\", null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"right\":\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"right\", this._elemLeft + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"top\", this._elemTop + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"left\", null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"bottom\", null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"down\":\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"left\", this._elemLeft + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"bottom\", this._elemTop + \"px\");\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"right\", null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"top\", null);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setDimensions(w: number, h: number): void {\r\n\t\tif (w < this.minWidth) { w = this.minWidth; }\r\n\t\tif (h < this.minHeight) { h = this.minHeight; }\r\n\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"width\", w + \"px\");\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"height\", h + \"px\");\r\n\r\n\t\tthis._elemWidth = w;\r\n\t\tthis._elemHeight = h;\r\n\t}\r\n\r\n\tpublic startMoving(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, \"moving\", true);\r\n\t\tconst style: any = window.getComputedStyle(this._ngEl.nativeElement);\r\n\t\tif (this._ngWidgetContainer.autoStyle) {\r\n\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"z-index\", (parseInt(style.getPropertyValue(\"z-index\"), 10) + 1).toString());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic stopMoving(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, \"moving\", false);\r\n\t\tconst style: any = window.getComputedStyle(this._ngEl.nativeElement);\r\n\t\tif (this._ngWidgetContainer.autoStyle) {\r\n\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, \"z-index\", (parseInt(style.getPropertyValue(\"z-index\"), 10) - 1).toString());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic recalculateSelf(): void {\r\n\t\tthis._recalculatePosition();\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic fixResize(newSize: INgWidgetSize): INgWidgetSize {\r\n\t\tif (this._maxCols > 0 && newSize.x > this._maxCols) newSize.x = this._maxCols;\r\n\t\tif (this._maxRows > 0 && newSize.y > this._maxRows) newSize.y = this._maxRows;\r\n\r\n\t\tif (this._minCols > 0 && newSize.x < this._minCols) newSize.x = this._minCols;\r\n\t\tif (this._minRows > 0 && newSize.y < this._minRows) newSize.y = this._minRows;\r\n\r\n\t\tconst itemWidth = (newSize.x * this._ngWidgetContainer.colWidth) + ((this._ngWidgetContainer.marginLeft + this._ngWidgetContainer.marginRight) * (newSize.x - 1));\r\n\t\tif (itemWidth < this.minWidth) newSize.x = Math.round(Math.ceil((this.minWidth + this._ngWidgetContainer.marginRight + this._ngWidgetContainer.marginLeft) / (this._ngWidgetContainer.colWidth + this._ngWidgetContainer.marginRight + this._ngWidgetContainer.marginLeft)));\r\n\r\n\t\tconst itemHeight = (newSize.y * this._ngWidgetContainer.rowHeight) + ((this._ngWidgetContainer.marginTop + this._ngWidgetContainer.marginBottom) * (newSize.y - 1));\r\n\t\tif (itemHeight < this.minHeight) newSize.y = Math.round(Math.ceil((this.minHeight + this._ngWidgetContainer.marginBottom + this._ngWidgetContainer.marginTop) / (this._ngWidgetContainer.rowHeight + this._ngWidgetContainer.marginBottom + this._ngWidgetContainer.marginTop)));\r\n\r\n\t\treturn newSize;\r\n\t}\r\n\r\n\t// \tprivate methods\r\n\tprivate elementMatches(element: any, selector: string): boolean {\r\n\t\tif (!element) return false;\r\n\t\tif (element.matches) return element.matches(selector);\r\n\t\tif (element.oMatchesSelector) return element.oMatchesSelector(selector);\r\n\t\tif (element.msMatchesSelector) return element.msMatchesSelector(selector);\r\n\t\tif (element.mozMatchesSelector) return element.mozMatchesSelector(selector);\r\n\t\tif (element.webkitMatchesSelector) return element.webkitMatchesSelector(selector);\r\n\r\n\t\tif (!element.document || !element.ownerDocument) return false;\r\n\r\n\t\tconst matches: any = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n\t\tlet i: number = matches.length;\r\n\t\twhile (--i >= 0 && matches.item(i) !== element) { }\r\n\t\treturn i > -1;\r\n\t}\r\n\r\n\tprivate _recalculatePosition(): void {\r\n\t\tconst x: number = (this._ngWidgetContainer.colWidth + this._ngWidgetContainer.marginLeft + this._ngWidgetContainer.marginRight) * (this._currentPosition.col - 1) + this._ngWidgetContainer.marginLeft;\r\n\t\tconst y: number = (this._ngWidgetContainer.rowHeight + this._ngWidgetContainer.marginTop + this._ngWidgetContainer.marginBottom) * (this._currentPosition.row - 1) + this._ngWidgetContainer.marginTop;\r\n\r\n\t\tthis.setPosition(x, y);\r\n\t}\r\n\r\n\tprivate _recalculateDimensions(): void {\r\n\t\tif (this._size.x < this._ngWidgetContainer.minCols) this._size.x = this._ngWidgetContainer.minCols;\r\n\t\tif (this._size.y < this._ngWidgetContainer.minRows) this._size.y = this._ngWidgetContainer.minRows;\r\n\r\n\t\tconst newWidth: number = (this._ngWidgetContainer.colWidth * this._size.x) + ((this._ngWidgetContainer.marginLeft + this._ngWidgetContainer.marginRight) * (this._size.x - 1));\r\n\t\tconst newHeight: number = (this._ngWidgetContainer.rowHeight * this._size.y) + ((this._ngWidgetContainer.marginTop + this._ngWidgetContainer.marginBottom) * (this._size.y - 1));\r\n\r\n\t\tconst w: number = Math.max(this.minWidth, this._ngWidgetContainer.minWidth, newWidth);\r\n\t\tconst h: number = Math.max(this.minHeight, this._ngWidgetContainer.minHeight, newHeight);\r\n\r\n\t\tthis.setDimensions(w, h);\r\n\t}\r\n\r\n\tprivate _getMousePosition(e: any): INgWidgetContainerRawPosition {\r\n\t\tif (e.originalEvent && e.originalEvent.touches) {\r\n\t\t\tconst oe: any = e.originalEvent;\r\n\t\t\te = oe.touches.length ? oe.touches[0] : (oe.changedTouches.length ? oe.changedTouches[0] : e);\r\n\t\t} else if (e.touches) {\r\n\t\t\te = e.touches.length ? e.touches[0] : (e.changedTouches.length ? e.changedTouches[0] : e);\r\n\t\t}\r\n\r\n\r\n\t\tconst refPos: INgWidgetContainerRawPosition = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tleft: e.clientX - refPos.left,\r\n\t\t\ttop: e.clientY - refPos.top\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _applyChanges(changes: any): void {\r\n\t\tchanges.forEachAddedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachChangedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachRemovedItem((record: any) => { delete this._config[record.key]; });\r\n\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n\tselector: \"[ngWidget]\",\r\n\tinputs: [\"config: ngWidget\"]\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: KeyValueDiffers, },\n{type: ElementRef, },\n{type: Renderer, },\n{type: NgWidgetContainer, },\n{type: ViewContainerRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'onItemChange': [{ type: Output },],\n'onDragStart': [{ type: Output },],\n'onDrag': [{ type: Output },],\n'onDragStop': [{ type: Output },],\n'onDragAny': [{ type: Output },],\n'onResizeStart': [{ type: Output },],\n'onResize': [{ type: Output },],\n'onResizeStop': [{ type: Output },],\n'onResizeAny': [{ type: Output },],\n'onChangeStart': [{ type: Output },],\n'onChange': [{ type: Output },],\n'onChangeStop': [{ type: Output },],\n'onChangeAny': [{ type: Output },],\n'ngWidgetChange': [{ type: Output },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}